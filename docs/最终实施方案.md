# OpenClaw ç¤¾äº¤åª’ä½“è‡ªåŠ¨åŒ–æœ€ç»ˆå®æ–½æ–¹æ¡ˆ

## åŸºäºè¯„ä¼°æŠ¥å‘Šçš„ç»¼åˆæ–¹æ¡ˆ

æœ¬æ–¹æ¡ˆåŸºäºä¸¤ä»½è¯„ä¼°æŠ¥å‘Šï¼š
- æ–¹æ¡ˆä¼˜åŒ–åˆ†æ.md
- GitHubé¡¹ç›®è¯„ä¼°.md

---

## ä¸€ã€æŠ€æœ¯æ¶æ„è®¾è®¡

### 1.1 ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      OpenClaw è‡ªåŠ¨åŒ–ç³»ç»Ÿ                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  OpenClaw   â”‚    â”‚  æµè§ˆå™¨ç®¡ç†  â”‚    â”‚  Cookieç®¡ç† â”‚         â”‚
â”‚  â”‚  ä¸»æ§åˆ¶å™¨   â”‚â”€â”€â”€â–¶â”‚    å¼•æ“     â”‚â—€â”€â”€â–¶â”‚    æœåŠ¡     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                  â”‚                   â”‚               â”‚
â”‚         â–¼                  â–¼                   â–¼               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  å†…å®¹ç”Ÿæˆ   â”‚    â”‚  Patchright â”‚    â”‚  æŒ‡çº¹é…ç½®   â”‚         â”‚
â”‚  â”‚   æœåŠ¡     â”‚    â”‚  (Chrome)   â”‚    â”‚   ç®¡ç†å™¨    â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                            â”‚                                    â”‚
â”‚                            â–¼                                    â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚                     â”‚  Camoufox   â”‚                            â”‚
â”‚                     â”‚  (Firefox)  â”‚                            â”‚
â”‚                     â”‚  é«˜å®‰å…¨æ¨¡å¼  â”‚                            â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 æ ¸å¿ƒç»„ä»¶è¯´æ˜

| ç»„ä»¶ | æŠ€æœ¯é€‰å‹ | è¯´æ˜ |
|-----|---------|------|
| ä¸»æ§åˆ¶å™¨ | Python + asyncio | åè°ƒå„æ¨¡å—å·¥ä½œ |
| æµè§ˆå™¨å¼•æ“ | Patchright + Camoufox | åŒå¼•æ“å¯åˆ‡æ¢ |
| Cookieç®¡ç† | æœ¬åœ°JSON + åŠ å¯†å­˜å‚¨ | æŒä¹…åŒ–ç™»å½•çŠ¶æ€ |
| æŒ‡çº¹é…ç½® | BrowserForge | éšæœºæŒ‡çº¹ç”Ÿæˆ |
| å†…å®¹ç”Ÿæˆ | OpenClaw LLM | æ–‡æ¡ˆåˆ›ä½œ |

---

## äºŒã€å®‰è£…é…ç½®æ­¥éª¤

### 2.1 ç¯å¢ƒè¦æ±‚

```
Python: 3.11+
æ“ä½œç³»ç»Ÿ: Linux (æ¨è) / macOS / Windows
å†…å­˜: æœ€ä½ 4GB
ç£ç›˜: æœ€ä½ 2GB
```

### 2.2 å®‰è£…å‘½ä»¤

```bash
# 1. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv openclaw-env
source openclaw-env/bin/activate

# 2. å®‰è£…æ ¸å¿ƒä¾èµ–
pip install patchright camoufox[geoip]

# 3. å®‰è£…æµè§ˆå™¨
patchright install chromium
python -m camoufox fetch  # ä¸‹è½½Camoufoxæµè§ˆå™¨

# 4. å®‰è£…è¾…åŠ©ä¾èµ–
pip install aiofiles cryptography browserforge
```

### 2.3 é…ç½®æ–‡ä»¶

**config/browser_config.yaml**
```yaml
# æµè§ˆå™¨é…ç½®
browser:
  default_engine: "patchright"  # patchright æˆ– camoufox
  headless: false
  timeout: 30000

# åæ£€æµ‹é…ç½®
anti_detection:
  fingerprint_rotation: true
  human_behavior: true
  random_delay: [1, 3]  # éšæœºå»¶è¿Ÿ1-3ç§’

# ä»£ç†é…ç½®ï¼ˆå¯é€‰ï¼‰
proxy:
  enabled: false
  server: ""
  username: ""
  password: ""

# Cookieé…ç½®
cookie:
  storage_path: "./data/cookies"
  encryption: true
  expiry_days: 30
```

---

## ä¸‰ã€Cookieç®¡ç†å’Œé˜²å°å·ç­–ç•¥

### 3.1 CookieæŒä¹…åŒ–æ–¹æ¡ˆ

```python
# cookie_manager.py
import json
import aiofiles
from pathlib import Path
from cryptography.fernet import Fernet

class CookieManager:
    def __init__(self, storage_path: str, encryption_key: bytes = None):
        self.storage_path = Path(storage_path)
        self.storage_path.mkdir(parents=True, exist_ok=True)
        self.cipher = Fernet(encryption_key) if encryption_key else None

    async def save_cookies(self, platform: str, cookies: list):
        """ä¿å­˜Cookieåˆ°åŠ å¯†æ–‡ä»¶"""
        data = json.dumps(cookies)
        if self.cipher:
            data = self.cipher.encrypt(data.encode())

        file_path = self.storage_path / f"{platform}_cookies.enc"
        async with aiofiles.open(file_path, "wb") as f:
            await f.write(data)

    async def load_cookies(self, platform: str) -> list:
        """åŠ è½½Cookie"""
        file_path = self.storage_path / f"{platform}_cookies.enc"
        if not file_path.exists():
            return []

        async with aiofiles.open(file_path, "rb") as f:
            data = await f.read()

        if self.cipher:
            data = self.cipher.decrypt(data)

        return json.loads(data)
```

### 3.2 æŒ‡çº¹è½®æ¢ç­–ç•¥

```python
# fingerprint_manager.py
from camoufox import Camoufox
from browserforge.fingerprints import FingerprintGenerator

class FingerprintManager:
    def __init__(self):
        self.generator = FingerprintGenerator()

    def generate_fingerprint(self, platform: str = "twitter"):
        """ç”ŸæˆéšæœºæŒ‡çº¹"""
        return self.generator.generate(
            browser="firefox",
            os="windows",
            locale="en-US"
        )

    def apply_fingerprint(self, browser_config: dict, fingerprint: dict):
        """åº”ç”¨æŒ‡çº¹åˆ°æµè§ˆå™¨é…ç½®"""
        config = browser_config.copy()
        config.update({
            "navigator": fingerprint.navigator,
            "screen": fingerprint.screen,
            "webgl": fingerprint.webgl,
            "audio": fingerprint.audio
        })
        return config
```

### 3.3 äººç±»è¡Œä¸ºæ¨¡æ‹Ÿ

```python
# human_behavior.py
import random
import asyncio

class HumanBehaviorSimulator:
    @staticmethod
    async def random_delay(min_sec: float = 1.0, max_sec: float = 3.0):
        """éšæœºå»¶è¿Ÿ"""
        delay = random.uniform(min_sec, max_sec)
        await asyncio.sleep(delay)

    @staticmethod
    async def human_type(page, selector: str, text: str):
        """æ¨¡æ‹Ÿäººç±»æ‰“å­—"""
        element = await page.query_selector(selector)
        for char in text:
            await element.type(char)
            await asyncio.sleep(random.uniform(0.05, 0.15))

    @staticmethod
    async def human_click(page, selector: str):
        """æ¨¡æ‹Ÿäººç±»ç‚¹å‡»"""
        element = await page.query_selector(selector)
        box = await element.bounding_box()

        # æ·»åŠ éšæœºåç§»
        x = box['x'] + random.uniform(5, box['width'] - 5)
        y = box['y'] + random.uniform(5, box['height'] - 5)

        await page.mouse.move(x, y)
        await HumanBehaviorSimulator.random_delay(0.1, 0.3)
        await page.mouse.click(x, y)
```

### 3.4 é¢‘ç‡é™åˆ¶ç­–ç•¥

```python
# rate_limiter.py
from datetime import datetime, timedelta
from collections import deque

class RateLimiter:
    def __init__(self, max_actions: int, period_minutes: int):
        self.max_actions = max_actions
        self.period = timedelta(minutes=period_minutes)
        self.actions = deque()

    async def check_and_wait(self):
        """æ£€æŸ¥å¹¶ç­‰å¾…"""
        now = datetime.now()

        # æ¸…ç†è¿‡æœŸè®°å½•
        while self.actions and now - self.actions[0] > self.period:
            self.actions.popleft()

        # å¦‚æœè¾¾åˆ°é™åˆ¶ï¼Œç­‰å¾…
        if len(self.actions) >= self.max_actions:
            wait_time = self.period - (now - self.actions[0])
            await asyncio.sleep(wait_time.total_seconds())

        self.actions.append(now)

# Twitterä¸“ç”¨é™åˆ¶
twitter_limiter = RateLimiter(
    max_actions=50,      # æ¯å°æ—¶æœ€å¤š50æ¬¡æ“ä½œ
    period_minutes=60
)
```

---

## å››ã€ä¸OpenClawçš„é›†æˆæ–¹å¼

### 4.1 æ ¸å¿ƒæ¥å£è®¾è®¡

```python
# openclaw_browser.py
from patchright.async_api import async_playwright
from camoufox.async_api import AsyncCamoufox
from typing import Optional, Literal

class OpenClawBrowser:
    def __init__(
        self,
        engine: Literal["patchright", "camoufox"] = "patchright",
        headless: bool = False
    ):
        self.engine = engine
        self.headless = headless
        self.browser = None
        self.page = None

    async def start(self):
        """å¯åŠ¨æµè§ˆå™¨"""
        if self.engine == "camoufox":
            self.browser = await AsyncCamoufox(headless=self.headless)
        else:
            self.playwright = await async_playwright().start()
            self.browser = await self.playwright.chromium.launch(
                headless=self.headless
            )

        self.page = await self.browser.new_page()
        return self

    async def goto(self, url: str):
        """å¯¼èˆªåˆ°URL"""
        await self.page.goto(url)
        await HumanBehaviorSimulator.random_delay()

    async def login_with_cookies(self, platform: str, cookies: list):
        """ä½¿ç”¨Cookieç™»å½•"""
        for cookie in cookies:
            await self.page.context.add_cookies([cookie])

    async def post_to_twitter(self, text: str, image_path: Optional[str] = None):
        """å‘å¸ƒåˆ°Twitter"""
        # åº”ç”¨é¢‘ç‡é™åˆ¶
        await twitter_limiter.check_and_wait()

        await self.goto("https://twitter.com/compose/tweet")

        # è¾“å…¥æ–‡å­—
        await HumanBehaviorSimulator.human_type(
            self.page,
            '[data-testid="tweetTextarea_0"]',
            text
        )

        # ä¸Šä¼ å›¾ç‰‡ï¼ˆå¦‚æœæœ‰ï¼‰
        if image_path:
            file_input = await self.page.query_selector('input[type="file"]')
            await file_input.set_input_files(image_path)
            await HumanBehaviorSimulator.random_delay(2, 4)

        # ç‚¹å‡»å‘å¸ƒ
        await HumanBehaviorSimulator.human_click(
            self.page,
            '[data-testid="tweetButtonInline"]'
        )

        # ä¿å­˜æ›´æ–°åçš„Cookie
        cookies = await self.page.context.cookies()
        return cookies

    async def close(self):
        """å…³é—­æµè§ˆå™¨"""
        if self.browser:
            await self.browser.close()
```

### 4.2 ä½¿ç”¨ç¤ºä¾‹

```python
# main.py
import asyncio
from openclaw_browser import OpenClawBrowser
from cookie_manager import CookieManager

async def main():
    # åˆå§‹åŒ–
    browser = OpenClawBrowser(engine="camoufox", headless=False)
    cookie_mgr = CookieManager("./data/cookies")

    # å¯åŠ¨æµè§ˆå™¨
    await browser.start()

    try:
        # åŠ è½½Cookie
        cookies = await cookie_mgr.load_cookies("twitter")
        if cookies:
            await browser.login_with_cookies("twitter", cookies)

        # å‘å¸ƒå†…å®¹
        new_cookies = await browser.post_to_twitter(
            text="ä»Šå¤©çš„å¿ƒæƒ…åˆ†äº« ğŸŒŸ",
            image_path="./photos/today.jpg"
        )

        # ä¿å­˜Cookie
        await cookie_mgr.save_cookies("twitter", new_cookies)

    finally:
        await browser.close()

if __name__ == "__main__":
    asyncio.run(main())
```

---

## äº”ã€é£é™©è¯„ä¼°å’Œå¤‡é€‰æ–¹æ¡ˆ

### 5.1 é£é™©çŸ©é˜µ

| é£é™©ç±»å‹ | æ¦‚ç‡ | å½±å“ | ç¼“è§£æªæ–½ |
|---------|------|------|---------|
| è´¦å·è¢«å°ç¦ | ä¸­ | é«˜ | ä½¿ç”¨ä»£ç†ã€æ¨¡æ‹Ÿäººç±»è¡Œä¸ºã€é™åˆ¶é¢‘ç‡ |
| Cookieå¤±æ•ˆ | é«˜ | ä¸­ | å®šæœŸåˆ·æ–°ã€å¤šè´¦å·å¤‡ä»½ |
| æŒ‡çº¹è¢«è¯†åˆ« | ä½ | é«˜ | CamoufoxåŒå¼•æ“åˆ‡æ¢ |
| å·¥å…·å¤±æ•ˆ | ä¸­ | ä¸­ | å¤šæ–¹æ¡ˆå¤‡ä»½ã€æŒç»­ç›‘æ§æ›´æ–° |
| éªŒè¯ç  | ä¸­ | ä¸­ | AIè¯†åˆ« + äººå·¥ä»‹å…¥æœºåˆ¶ |

### 5.2 å¤‡é€‰æ–¹æ¡ˆ

**ä¸»æ–¹æ¡ˆå¤±è´¥æ—¶çš„åˆ‡æ¢æµç¨‹**ï¼š

```
Camoufox (Firefox) â”€â”€å¤±è´¥â”€â”€â–¶ Patchright (Chrome) â”€â”€å¤±è´¥â”€â”€â–¶ nodriver
        â”‚                          â”‚                       â”‚
        â–¼                          â–¼                       â–¼
   æŒ‡çº¹ä¼ªé€ æœ€å¼º            APIå…¼å®¹æ€§å¥½              æˆç†Ÿç¨³å®š
```

### 5.3 ç›‘æ§å’Œå‘Šè­¦

```python
# monitor.py
import logging
from datetime import datetime

class AutomationMonitor:
    def __init__(self, log_file: str = "automation.log"):
        logging.basicConfig(
            filename=log_file,
            level=logging.INFO,
            format='%(asctime)s - %(levelname)s - %(message)s'
        )
        self.logger = logging.getLogger("OpenClaw")

    def log_action(self, action: str, success: bool, details: str = ""):
        status = "SUCCESS" if success else "FAILED"
        self.logger.info(f"[{status}] {action} - {details}")

    def alert(self, message: str):
        """å‘é€å‘Šè­¦ï¼ˆå¯æ‰©å±•ä¸ºé‚®ä»¶/çŸ­ä¿¡ï¼‰"""
        self.logger.warning(f"[ALERT] {message}")
        print(f"âš ï¸ ALERT: {message}")
```

---

## å…­ã€å®æ–½æ—¶é—´çº¿

### é˜¶æ®µä¸€ï¼šåŸºç¡€æ­å»ºï¼ˆç¬¬1-2å¤©ï¼‰

| ä»»åŠ¡ | é¢„è®¡æ—¶é—´ | éªŒæ”¶æ ‡å‡† |
|-----|---------|---------|
| ç¯å¢ƒé…ç½® | 2å°æ—¶ | æ‰€æœ‰ä¾èµ–å®‰è£…æˆåŠŸ |
| Patchrightæµ‹è¯• | 2å°æ—¶ | èƒ½è®¿é—®Twitter |
| Camoufoxæµ‹è¯• | 2å°æ—¶ | æŒ‡çº¹æ£€æµ‹é€šè¿‡ |
| Cookieç®¡ç†å®ç° | 4å°æ—¶ | èƒ½ä¿å­˜/åŠ è½½Cookie |

### é˜¶æ®µäºŒï¼šæ ¸å¿ƒåŠŸèƒ½ï¼ˆç¬¬3-4å¤©ï¼‰

| ä»»åŠ¡ | é¢„è®¡æ—¶é—´ | éªŒæ”¶æ ‡å‡† |
|-----|---------|---------|
| å‘å¸ƒåŠŸèƒ½ | 4å°æ—¶ | èƒ½å‘å¸ƒæ–‡å­—+å›¾ç‰‡ |
| äººç±»è¡Œä¸ºæ¨¡æ‹Ÿ | 3å°æ—¶ | å»¶è¿Ÿã€æ‰“å­—ã€ç‚¹å‡»æ¨¡æ‹Ÿ |
| é¢‘ç‡é™åˆ¶ | 2å°æ—¶ | ä¸è§¦å‘é™åˆ¶ |
| é”™è¯¯å¤„ç† | 3å°æ—¶ | å¼‚å¸¸èƒ½æ¢å¤ |

### é˜¶æ®µä¸‰ï¼šé›†æˆæµ‹è¯•ï¼ˆç¬¬5-6å¤©ï¼‰

| ä»»åŠ¡ | é¢„è®¡æ—¶é—´ | éªŒæ”¶æ ‡å‡† |
|-----|---------|---------|
| OpenClawé›†æˆ | 4å°æ—¶ | èƒ½ä»OpenClawè°ƒç”¨ |
| å¤šåœºæ™¯æµ‹è¯• | 4å°æ—¶ | å„ç§åœºæ™¯æ­£å¸¸ |
| å‹åŠ›æµ‹è¯• | 2å°æ—¶ | è¿ç»­è¿è¡Œç¨³å®š |
| æ–‡æ¡£å®Œå–„ | 2å°æ—¶ | æ–‡æ¡£å®Œæ•´ |

### é˜¶æ®µå››ï¼šä¸Šçº¿éƒ¨ç½²ï¼ˆç¬¬7å¤©ï¼‰

| ä»»åŠ¡ | é¢„è®¡æ—¶é—´ | éªŒæ”¶æ ‡å‡† |
|-----|---------|---------|
| ç”Ÿäº§ç¯å¢ƒé…ç½® | 2å°æ—¶ | é…ç½®å®Œæˆ |
| ç›‘æ§éƒ¨ç½² | 2å°æ—¶ | å‘Šè­¦æ­£å¸¸ |
| æ­£å¼è¿è¡Œ | 4å°æ—¶ | åŠŸèƒ½æ­£å¸¸ |

---

## ä¸ƒã€æ€»ç»“

### æ¨èæŠ€æœ¯æ ˆ

```
æ ¸å¿ƒå¼•æ“: Camoufox (Firefox) + Patchright (Chrome)
è¯­è¨€: Python 3.11+
å¼‚æ­¥æ¡†æ¶: asyncio
Cookieç®¡ç†: è‡ªå®šä¹‰ + åŠ å¯†å­˜å‚¨
æŒ‡çº¹ä¼ªé€ : BrowserForge + Camoufoxå†…ç½®
```

### å…³é”®æˆåŠŸå› ç´ 

1. **åæ£€æµ‹èƒ½åŠ›**: Camoufoxçš„C++å±‚é¢æŒ‡çº¹ä¼ªé€ æ˜¯æ ¸å¿ƒä¼˜åŠ¿
2. **ç¨³å®šæ€§**: åŒå¼•æ“å¯åˆ‡æ¢ï¼Œæé«˜å®¹é”™ç‡
3. **äººç±»æ¨¡æ‹Ÿ**: å»¶è¿Ÿã€æ‰“å­—ã€ç‚¹å‡»å¿…é¡»æ¨¡æ‹Ÿäººç±»è¡Œä¸º
4. **é¢‘ç‡æ§åˆ¶**: ä¸¥æ ¼éµå®ˆå¹³å°é™åˆ¶
5. **ç›‘æ§å‘Šè­¦**: åŠæ—¶å‘ç°é—®é¢˜å¹¶æ¢å¤

---

**æ–¹æ¡ˆåˆ¶å®šæ—¶é—´**: 2026-02-11
**ç‰ˆæœ¬**: v1.0
**çŠ¶æ€**: å¾…éªŒè¯
